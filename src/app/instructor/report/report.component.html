<app-insturctor-container>
    <form class="m-3">
      
      <div class="col-lg-12 d-flex align-items-stretch">
        <div class="card w-100">
          <div class="card-body p-4">
            <h5 class="card-title fw-semibold mb-4">All Reports</h5>
            <hr />
            <form>
              <h5 class="my-4">Select section from the list to display the report </h5>
              <mat-form-field>
                <mat-label>Select section</mat-label>
                <mat-select [(ngModel)]="selectedSection" name="selectedSection">
                    <mat-option *ngFor="let s of instructorService.sectionsByUserId" [value]="s.sectionid"
                        (click)="loadReports(s.sectionid)">
                        {{s.sectionname}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

          </form>
          
    <div class="row" *ngIf="selectedSection > 0">
      <mat-form-field>
        <mat-label>Filter Students</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Filter Students" #input>
      </mat-form-field>
      
      <table mat-table [dataSource]="this.instructorService.reportsBySectionId">
      
        <!-- Position Column -->
        <ng-container matColumnDef="firstName">
          <th mat-header-cell *matHeaderCellDef>First Name </th>
          <td mat-cell *matCellDef="let element"> {{element.firsname}} </td>
        </ng-container>
      
        <!-- Name Column -->
        <ng-container matColumnDef="lastName">
          <th mat-header-cell *matHeaderCellDef>Last Name </th>
          <td mat-cell *matCellDef="let element"> {{element.lastname}} </td>
        </ng-container>
      
        <!-- Weight Column -->
        <ng-container matColumnDef="points">
          <th mat-header-cell *matHeaderCellDef> Section Points </th>
          <td mat-cell *matCellDef="let element"> {{element.points}} </td>
        </ng-container>
      
        <!-- Symbol Column -->
        <ng-container matColumnDef="absences">
          <th mat-header-cell *matHeaderCellDef> Absences </th>
          <td mat-cell *matCellDef="let element"> {{element.absences}} </td>
        </ng-container>

        <ng-container matColumnDef="More Details">
          <th mat-header-cell *matHeaderCellDef> More details </th>
          <td mat-cell *matCellDef="let element"> 
            <button (click)="OpenDetailsDialog(element)" class="btn btn-warning mx-2">
              <svg xmlns="http://www.w3.org/2000/svg"
                  class="icon icon-tabler icon-tabler-file-description" width="24" height="24"
                  viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M14 3v4a1 1 0 0 0 1 1h4" />
                  <path
                      d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
                  <path d="M9 17h6" />
                  <path d="M9 13h6" />
              </svg>
          </button>  
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      
    </div>
      <ng-template #DetailsDialog>
        <h2 mat-dialog-title>Student Details</h2>
        <mat-dialog-content class="mat-typography">
          <h2>Total Points </h2>
          <p>{{reportInformation.totalpoints}}</p>
          <h2>Enrollment Date</h2>
          <p>
            {{ reportInformation.enrollmentdate }}
          </p> 
        </mat-dialog-content>
      </ng-template>
     