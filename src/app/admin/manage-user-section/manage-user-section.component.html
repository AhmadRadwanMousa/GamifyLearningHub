<app-admin-container>
    <div class="col-lg-12 d-flex align-items-stretch">
        <div class="card w-100">
          <div class="card-body p-4">
            <h5 class="card-title fw-semibold mb-4">Add Trainee to Course sections</h5>
            <hr />
              <form>
                <mat-form-field>
                    <mat-label>Select Course</mat-label>
                    <mat-select [(ngModel)]="selectedCourse" name="courseSelect">
                        <mat-option *ngFor="let course of admin.courses" [value]="course.courseid" (click)="loadSection(course.courseid)">{{course.coursename}}
                        </mat-option>
                    </mat-select>
                  </mat-form-field>
                  
              </form>
              <table *ngIf="admin.sections !== null && admin.sections.length > 0" class="table text-nowrap mb-0 align-middle text-center">
                <thead class="text-dark fs-4">
                    <tr>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Section Name</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Section Capacity</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Instructor Name</h6>
                      </th>
                      <th class="border-bottom-0">
                        <h6 class="fw-semibold mb-0">Action</h6>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let s of admin.sections">
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">{{ s.sectionname }}</h6>
                        </td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">{{ s.sectionsize }}</h6>
                        </td>
                        <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">{{ s.user.firsname }} {{s.user.lastname}}</h6>
                        </td>
                        <td class="border-bottom-0">
                            <button (click)="AddDialog(s.sectionid)" class="btn btn-primary">Add Trainees</button>
                        </td>
                    </tr>
                  </tbody>
              </table>
          </div>
        </div>
      </div>
</app-admin-container>

<ng-template #OpenAddDialog>
<div class="container">
  <form [formGroup]="formGroup">
    <div class="row">
      <mat-form-field class="col-lg-12 mt-4">
        <mat-label>Select Student</mat-label>
        <input matInput [matAutocomplete]="auto" formControlName="userid">
        <mat-error *ngIf="formGroup.controls['userid'].hasError('required')">Student is required</mat-error>
        <mat-autocomplete  #auto>
            <mat-option *ngFor="let student of admin.filterdStudents" [value]="student.userid">
                {{student.firsname}} {{student.lastname}}
            </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <div class="col-lg-12 center mt-3 d-flex justify-content-center">
        <button mat-dialog-close class="btn btn-primary" [disabled]="formGroup.invalid" (click)="CreateUserSection()">Add student</button>

      </div>
    </div>
      <br>
      
      

      
</form>
</div>
</ng-template>